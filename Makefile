# ---------------------------------------------------------------------------- #
# ---------------------------------------------------------------------------- #
# #                                                                          # #
# #       ███╗   ███╗ █████╗ ██╗  ██╗███████╗███████╗██╗██╗     ███████╗     # #
# #       ████╗ ████║██╔══██╗██║ ██╔╝██╔════╝██╔════╝██║██║     ██╔════╝     # #
# #       ██╔████╔██║███████║█████╔╝ █████╗  █████╗  ██║██║     █████╗       # #
# #       ██║╚██╔╝██║██╔══██║██╔═██╗ ██╔══╝  ██╔══╝  ██║██║     ██╔══╝       # #
# #       ██║ ╚═╝ ██║██║  ██║██║  ██╗███████╗██║     ██║███████╗███████╗     # #
# #       ╚═╝     ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚══════╝╚═╝     ╚═╝╚══════╝╚══════╝     # #
# #                                                                          # #
# ---------------------------------------------------------------------------- #
# ---------------------------------------------------------------------------- #

# --------------------------- Terminal Color Codes --------------------------- #
NC  := \033[31;0m
RED := \033[0;31;1m
YEL := \033[0;33;1m
GRA := \033[0;37;1m
CYN := \033[0;36;1m
GRN := \033[0;32;1m
MGN := \033[0;35;1m
BLU := \033[0;34;1m

# ---------------------------------------------------------------------------- #

define TITLE
${RED}
=======================================================================================================
||                                  ,,                                                               ||
||                                `7MM                                                               ||
||                                  MM                                                               ||
|| `7MMpdMAo. `7MM  `7MM  ,pP"Ybd   MMpMMMb.          ,pP"Ybd `7M'    ,A    `MF' ,6"Yb.  `7MMpdMAo.  ||
||   MM   `Wb   MM    MM  8I   `"   MM    MM          8I   `"   VA   ,VAA   ,V  8)   MM    MM   `Wb  ||
||   MM    M8   MM    MM  `YMMMa.   MM    MM          `YMMMa.    VA ,V  VA ,V    ,pm9MM    MM    M8  ||
||   MM   ,AP   MM    MM  L.   I8   MM    MM          L.   I8     VVV    VVV    8M   MM    MM   ,AP  ||
||   MMbmmd'    `Mbod"YML.M9mmmP' .JMML  JMML.        M9mmmP'      W      W     `Moo9^Yo.  MMbmmd'   ||
||   MM                                                                                    MM        ||
|| .JMML.                                     mmmmmmm                                    .JMML.      ||
||                                                                                                   ||
=======================================================================================================
\n\t\t\t\t\t\t\t\t${GRA} - Created By ${BLU}The-Intruder${NC}
endef
export TITLE

# ---------------------------------------------------------------------------- #
CC := gcc
CC_FLAGS := -Wall -Wextra -Werror \
	-Ofast -march=native -fno-signed-zeros -fno-trapping-math
CC_OPTS := -Llibs/libft -lft -Llibs/ft_printf -lftprintf -L. -lps

NB_LIST :=  -1978767808 385308482 1485905892 -22169975 -1231253208 -1606717907 903524328 1299406134 -242824424 602420803 -817828308 -942012035 -1937659202 1002621340 -422435388 -648596793 1831732981 -562160807 1492322559 17938448 -1994232479 1155764724 1764815194 1883079759 739208355 1651462896 811610828 500436615 1613401482 1917612733 -1186381888 1954924613 14047115 -722268828 1068476143 439027982 -8944275 236621080 844255725 -494321223 -292407958 -1481139152 -420791588 682130326 -681527317 780556718 -203027026 1639489987 865704590 -1121831707 1026964555 -250886178 -932096939 -80198357 975877290 1349956206 1671191894 -1818886855 55661772 1344291347 -679550254 -81605674 1524032674 -1091520402 -1378187949 -1609942168 -1752292715 -1554359357 -177343653 -1838654742 2006022228 -1258774997 1217057759 -1777301988 -1458475823 267462485 -1611048910 -2032178111 878268314 -1985786600 -1389443360 1591343538 836477240 1040452163 -1861267875 1164147031 2027933667 -967216689 -1960601133 -1461295754 -1976861141 1916238235 2058302623 -1097070369 1453863383 1875449027 -1241802355 -1669532796 1981767953 -1968232761 49427630 -848053114 -1922453509 993983393 1615118522 244741687 -1340777964 -1092498463 825578314 638021315 1283745386 -822057475 -1385621669 282736691 -915199867 1670801078 396180697 180557210 -965480218 -1518185327 -306961664 -918232689 1213327923 1708125572 2100981855 -1949193963 1357913537 -79583305 -496916627 -1031954954 1017107335 352132865 -1097297592 1564649810 -145791730 -2083514442 1267077233 783069946 2073081435 -1620875367 -336885114 835928051 -1813081099 -1466724442 -1301827304 1261389730 127015055 -1794308255 -974045457 -361194693 1326820675 1106384135 -1577810130 1879243011 -1457043934 -52935387 575985103 1240245618 1475738125 1547715737 -1963384908 -976508518 366730704 1382500841 663841776 -1001313692 889536203 1071609817 699957849 1346947283 1753425329 79819585 1271050254 -390105668 1310922663 -1440490162 2019428821 -1291644603 -1639758191 1548372810 509106408 1155426347 799649819 -661535621 -151055966 435099084 931971023 -1348996836 1581265077 -808958904 2095546217 -1931451162 -141595808 -992410666 -1703738216 1509597115 -1556355803 -2143008877 -446116131 326995036 -1105710059 1447163623 1108916328 -540848178 1102094567 -958743965 619361574 -941501953 -794017853 -1182659221 -1922291482 459459498 -1345592305 -1358171589 -287671700 -651774549 -1806948451 -83865099 -472856988 -370723897 608774751 244512577 -1459011359 -252813371 257576049 842492061 -1415020541 2075967441 46463603 1286733617 1282219100 1861984911 -1688441046 276850115 1009625429 178670807 922903902 -1918392594 2029406093 1619644483 721331766 -1136445586 2061787980 193477284 -1360061390 -566138971 1247720626 1492391979 -1090122491 1961646820 -1762037543 -1136578095 -1501718699 2109371814 715349731 -2088346629 2034433552 -722768130 1720274281 -445799599 -1069386691 629093016 -1895341778 272633915 1748238842 -1788988017 773723411 -1332704499 -1030083193 -900287290 2013404439 73630025 507061441 324233656 -309111467 1694037273 -2105470136 -1063306233 259596519 -2037220108 1993867660 1587806998 -1816142687 112237110 -433620266 1387713142 -501593668 1862911572 -1556906579 -2063445686 856144629 314254613 -1170961185 2132277114 1504057204 1656718241 214815122 1703702005 -1868221666 -536223145 -1002416200 -1823814402 592902084 289075810 1317057291 -242048718 1084635098 -1959097579 -1001684497 -521982398 983137657 156956541 1497038214 19726306 -1415207232 764623659 1947858998 1634288803 -1686522866 1885146574 -1012722648 -1072494834 -2047789819 2025011301 368846317 1779058511 444879972 755462529 1189990592 532358308 1111264063 -886552388 1792862647 -1170776634 -813578411 -614466648 -164992137 -403238011 -505595472 -1393029119 107832363 -1653374745 2049149140 -2122373163 -772311125 -229501934 2067209637 -1131342262 2046255120 1045812575 -347076318 399754441 -208719063 -24273488 2064663879 388571196 -945287883 -1270733689 761077654 -402555987 -298151714 2086867634 447764872 402452000 354360300 908617635 1594755491 282105147 356554372 -1160777977 -198601806 612453327 1670860370 -664694075 1642929153 -1545573025 -1203901916 587161236 -101004124 1885122535 361407576 1203977933 1811565222 -399522519 2002673898 338810549 964807239 1768370549 664554517 354166191 612996845 -1831716324 2099263924 831555651 64888480 -25373830 -977309111 -221054798 1045738119 -614133049 1256106425 2115313934 1670472998 -2095219500 -1138140355 1067227566 1900298149 -942588928 -605803639 67147567 1954199940 -1261707878 1724373337 1880480163 1265082901 2131684857 -885484966 -725987856 1993780180 -1203602386 -445070593 833042335 1898468842 1785407369 2005237971 879204432 -1129718769 307078680 594648646 1625842307 1246478233 1481884150 2136343463 605621930 -1557348811 -642974458 -320119405 987165904 -567954607 -1738494620 -1257816757 826905885 -72841594 -621513222 1165721080 -194623223 1572215205 -1523005735 1101575625 -1717453503 -1143810021 1015215082 -574664561 585301171 -1192122176 775842955 1099468198 1123050684 45120570 -144753750 2038454682 -1534632770 503903915 104501417 1966268166 -2048698281 83612309 742978322 -200704245 -1657862710 -174456166 1962723929 -191807414 -1688070845 913323898 1947190744 673661339 -2108745053 -1662405378 207711194 -190665350 -617492220 -2009787507 1630714821 1021747696 1398987211 -1072359497 -1880682069 -1712869834 1964215915 -2118025083 -928047371 -80310120 -781678785 55593062 1431983719 763717780 1421201530 -1479024146 -1767867973

PROJECT := push_swap
MAIN := push_swap.c
HEADER := push_swap.h
NAME := libps.a
EXEC := push_swap

# ---------------------------------------------------------------------------- #
SRCS_DIR := srcs/
SRCS_LST := init_stack.c error_handling.c stack_ops_utils.c stack_ops_main.c \
	misc_utils_i.c misc_utils_ii.c lis_algo.c lis_misc.c lis_filtering.c \
	testing_functions.c sorting_algo_i.c sorting_algo_ii.c sorting_algo_iii.c 
SRCS := ${addprefix ${SRCS_DIR}, ${SRCS_LST}}

OBJS_DIR := objs/
OBJS_LST := ${patsubst %.c, %.o, ${SRCS_LST}}
OBJS := ${addprefix ${OBJS_DIR}, ${OBJS_LST}}

# ---------------------------------------------------------------------------- #
.PHONY: all clean fclean re title libs exclean intro compile

all: title compile

libs:
	@make -C libs/libft/
	@make -C libs/ft_printf/

${NAME}: libs intro ${OBJS_DIR} ${OBJS} ${HEADER}
	@ar -rcs ${NAME} ${OBJS}
	@echo "$(BLU)Archive file $(GRA)$(NAME)$(BLU) created successfully$(NC)\n"

${OBJS_DIR}%.o: ${SRCS_DIR}%.c ${HEADER}
	@${CC} ${CC_FLAGS} -c $< -o $@
	@echo "${MGN}Object file ${GRA}$@${MGN} created from ${GRA}$<${MGN}${NC}"

$(OBJS_DIR):
	@mkdir $(OBJS_DIR)

clean:
	@make -C libs/ft_printf/ clean
	@make -C libs/libft/ clean
	@rm -rf ${OBJS}
	@echo "${GRA}${PROJECT}${RED}\tobject files have been deleted${NC}"
	@echo "\n"

exclean:
	@rm -f ${EXEC}
	@echo "${GRA}${EXEC}${RED}\texecutable file has been deleted\n${NC}"

fclean: clean exclean
	@make -C libs/ft_printf/ fclean
	@make -C libs/libft/ fclean
	@rm -rf ${NAME}
	@echo "${GRA}${PROJECT}${RED}\tarchive file ${GRA}${NAME}${RED}\t\thas been deleted${NC}"
	@echo "\n"

re: fclean all

compile: ${NAME} ${HEADER} ${MAIN}
	@${CC} ${CC_FLAGS} ${CC_OPTS} ${MAIN} -o ${EXEC}

recompile: fclean all

execute: ${EXEC}
	@./${EXEC} ${NB_LIST}
	@./${EXEC} ${NB_LIST} | ./checker_Mac ${NB_LIST}
	@./${EXEC} ${NB_LIST} | wc -l


intro:
	@echo "\n${YEL}Entering ${GRA}${PROJECT}${YEL}'s makefile"
	@echo "----------------------------${NC}"

title:
	@clear
	@echo "$$TITLE"

# ---------------------------------------------------------------------------- #
