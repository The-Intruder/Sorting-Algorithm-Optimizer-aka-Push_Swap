# ---------------------------------------------------------------------------- #
# ---------------------------------------------------------------------------- #
# #                                                                          # #
# #       ███╗   ███╗ █████╗ ██╗  ██╗███████╗███████╗██╗██╗     ███████╗     # #
# #       ████╗ ████║██╔══██╗██║ ██╔╝██╔════╝██╔════╝██║██║     ██╔════╝     # #
# #       ██╔████╔██║███████║█████╔╝ █████╗  █████╗  ██║██║     █████╗       # #
# #       ██║╚██╔╝██║██╔══██║██╔═██╗ ██╔══╝  ██╔══╝  ██║██║     ██╔══╝       # #
# #       ██║ ╚═╝ ██║██║  ██║██║  ██╗███████╗██║     ██║███████╗███████╗     # #
# #       ╚═╝     ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚══════╝╚═╝     ╚═╝╚══════╝╚══════╝     # #
# #                                                                          # #
# ---------------------------------------------------------------------------- #
# ---------------------------------------------------------------------------- #

# --------------------------- Terminal Color Codes --------------------------- #
NC  := \033[31;0m
RED := \033[0;31;1m
YEL := \033[0;33;1m
GRA := \033[0;37;1m
CYN := \033[0;36;1m
GRN := \033[0;32;1m
MGN := \033[0;35;1m
BLU := \033[0;34;1m

# ---------------------------------------------------------------------------- #

define TITLE
${RED}
=======================================================================================================
||                                  ,,                                                               ||
||                                `7MM                                                               ||
||                                  MM                                                               ||
|| `7MMpdMAo. `7MM  `7MM  ,pP"Ybd   MMpMMMb.          ,pP"Ybd `7M'    ,A    `MF' ,6"Yb.  `7MMpdMAo.  ||
||   MM   `Wb   MM    MM  8I   `"   MM    MM          8I   `"   VA   ,VAA   ,V  8)   MM    MM   `Wb  ||
||   MM    M8   MM    MM  `YMMMa.   MM    MM          `YMMMa.    VA ,V  VA ,V    ,pm9MM    MM    M8  ||
||   MM   ,AP   MM    MM  L.   I8   MM    MM          L.   I8     VVV    VVV    8M   MM    MM   ,AP  ||
||   MMbmmd'    `Mbod"YML.M9mmmP' .JMML  JMML.        M9mmmP'      W      W     `Moo9^Yo.  MMbmmd'   ||
||   MM                                                                                    MM        ||
|| .JMML.                                     mmmmmmm                                    .JMML.      ||
||                                                                                                   ||
=======================================================================================================
\n\t\t\t\t\t\t\t\t${GRA} - Created By ${BLU}The-Intruder${NC}
endef
export TITLE

# ---------------------------------------------------------------------------- #
CC := gcc
CC_FLAGS := -Wall -Wextra -Werror \
	-Ofast -march=native -fno-signed-zeros -fno-trapping-math
CC_OPTS := -Llibs/libft -lft -Llibs/ft_printf -lftprintf -L. -lps

NB_LIST := 1687327798 303876187 1438841159 -781549357 131780529 1897712402 1171764434 -2049716416 -1659079181 -1619728696 687661775 492647874 1397011706 -841066383 887105299 -3068860 1385104226 -1608248690 -551329857 1017821149 798065429 -1160929435 944482991 -387886114 9607 -1688758334 -948234962 -310619495 -1200812701 328306301 -272290287 -210470989 1507683804 1191603633 -1626072062 -1541364175 -2020469911 1302656046 2013292153 -1265426960 255592423 -1054651951 -966383285 808662178 -1054695153 1902283643 -1396077156 -464098094 849463146 720089544 1479182530 -913494585 1016469825 -247409673 429121172 -1992717177 172605581 1515327013 2079679386 -377344147 -446791621 1071566876 -2025053304 2070352681 560591273 1720117160 -1473480847 -1007133755 1738077214 763987191 -273591134 798937868 -1186632085 -1823246010 -483381232 -1171360662 920064614 -1448044648 1943253416 -383010944 -728519879 912162449 360317104 -1305840680 735148782 -1982216228 1337747155 1932157314 1309976215 1479502744 1642808585 -1021983702 -1470739059 105592341 -1687036374 388025656 263634550 2047443037 953841501 -1471953007 -491482317 -155275591 282662405 1833556697 -177838941 -65192860 1451268328 287030755 1882520823 -93498325 154146454 -1606571604 1371167937 167189029 -1747677540 -35387594 -1738857500 919000893 -976298059 1928982015 1357984427 -180188434 -321775342 -1258738234 -442459131 1081542489 591750309 1890738606 -548356547 1608324793 -946511494 1795329425 768133940 1856706057 -834896875 -1775056668 548890227 -1326952325 642407974 -1918297481 797878765 -18227480 382482561 -485595433 -255555910 817837027 -1010911540 -1305008409 -288976978 -1464444145 -1671385434 1492611610 1283625894 750717608 817718863 -1684326072 -224880438 1246577821 2053980329 1936800283 -314784193 -1912538939 -1410996081 912885278 68295067 1994036523 -395500162 -918882795 -1129298994 -1446374901 -81219936 398618560 865840396 -2049543007 571314301 1271916767 91375371 -235415584 -2009815793 385667759 -67111987 1469247731 -974556286 1728222198 -1746020147 453196401 -1309838194 31140771 -745351859 -901822072 178458105 1157341286 -1749155432 -1054559602 1459900120 -517233776 -1327474159 1412186076 1560718698 -1141412821 -51873625 1425785216 -1498179902 1829137509 -1521665689 1173797839 -661361764 -48702325 1946104019 1499659073 -53600536 729963408 1229687642 1225643833 1796913173 814044178 972986764 -521542018 1439152190 1051539281 -1987882645 -1660234655 -2063429650 -2090238946 -1407446333 -1252333816 -1153509919 2062592752 -2111200783 1411865490 -293096634 874467349 732660174 -1896160043 -1688342261 -188070860 1821003549 1158009122 834390481 -243102804 2060063108 1856130366 718609403 -973239251 -1208586895 1381941859 426308464 -1696159584 -1744756649 -49873618 950357023 -1379444334 -1802933071 91460607 152361431 290593444 1776602066 2101258209 -720464782 495326779 399422607 1739516862 295336323 -458833512 -805983531 -1265216392 1626707964 368816237 -1107512971 -488337350 1003423590 -491977141 1436992407 -1347388132 870038865 820979678 753438476 -1607284789 -89762869 1915872982 -1074606203 2077158969 -1878516319 2007421903 2072483732 1141344389 314613474 -1920098699 -196028009 1206576517 -994557262 119270579 -1075852015 -1265141078 444506816 -95110742 1085604272 -1567383924 -1722403582 856913829 -118446592 -799906890 933784186 -660935043 -485717633 233727929 1459523996 387194180 1395488187 596416367 -1097440736 1771907522 1508619106 -464448495 253266560 -468637950 -1430777363 1457836413 -1653050522 2110940669 -882588341 -612420110 8898400 1809421940 -210148865 -1302829605 -1704680461 937133008 -798911281 8046785 -262525246 701781023 -607418237 -133719174 1437492011 483683884 327520176 -1482053565 -78933032 623494067 -2049897576 951055215 -1098185083 -466799947 1374528326 651566235 -1193588170 635980693 -2036628350 1281269531 -1067503568 -645326437 -259392567 1237186333 1702851819 160080226 -298545816 637535244 -2092985047 17045453 -1773250570 -528123913 -812808973 -591830897 672664618 1091629437 695828996 -1420682476 -763294116 -1391331194 -2104047 -94502976 -1641524834 -297664343 1391707063 -1897432813 -999049676 -439219805 484365013 1007189563 1798326825 1496102543 -411205040 -1727512499 1925822112 -1488771891 533005704 -785432923 -228233258 387346937 758752708 1930364991 869582217 -1194650324 -668950909 -1088484356 960978963 -1784672412 1094526146 -538670408 -162064702 868570431 1868552535 616950092 -320849909 -1584400043 2063581430 -1583693803 -613044168 -1670985429 162326627 1096353672 -2012670148 142725063 -1652853523 -826039157 827352169 -1617911356 1477229220 -1499091136 -150707891 680018519 -694753844 -1140764350 636179710 1001048774 2119638779 -1320875726 1087775007 797565119 109355324 19748392 -1503310165 1051272025 -397398704 -772667819 -1092172356 1002776001 -739409772 877310106 -171255150 -1901154671 1041000599 1535031278 -419742708 511489274 -586076891 330942157 -1949850390 792610681 -650260907 -184379426 847916048 752246989 -877276943 1873583798 -6418932 1901525928 1630320662 -577722157 -695358884 -2133719060 555922894 25735258 2141358308 -1781707337 -1240702488 1655038611 -1282714692 -750643832 306384216 1341789365 -1867616084 -401912302 -465253587 357527692 1083192044 -1177270744 62868015 23300010 1363551134 705154817 -2115319775 -294351182 -146963652 -2101384668 1619894191 -696093904 663688898 -2130276728 864949375 1613014461 617456550 1107297217 1972488056 536973652 -921337082 -2146748674 1905201262 -393594677

PROJECT := push_swap
MAIN := push_swap.c
HEADER := push_swap.h
NAME := libps.a
EXEC := push_swap

# ---------------------------------------------------------------------------- #
SRCS_DIR := srcs/
SRCS_LST := init_stack.c error_handling.c stack_ops_utils.c stack_ops_main.c \
	misc_utils_i.c misc_utils_ii.c lis_algo.c lis_misc.c lis_filtering.c \
	testing_functions.c sorting_algo_i.c sorting_algo_ii.c sorting_algo_iii.c 
SRCS := ${addprefix ${SRCS_DIR}, ${SRCS_LST}}

OBJS_DIR := objs/
OBJS_LST := ${patsubst %.c, %.o, ${SRCS_LST}}
OBJS := ${addprefix ${OBJS_DIR}, ${OBJS_LST}}

# ---------------------------------------------------------------------------- #
.PHONY: all clean fclean re title libs exclean intro compile

all: title compile

libs:
	@make -C libs/libft/
	@make -C libs/ft_printf/

${NAME}: libs intro ${OBJS_DIR} ${OBJS} ${HEADER}
	@ar -rcs ${NAME} ${OBJS}
	@echo "$(BLU)Archive file $(GRA)$(NAME)$(BLU) created successfully$(NC)\n"

${OBJS_DIR}%.o: ${SRCS_DIR}%.c ${HEADER}
	@${CC} ${CC_FLAGS} -c $< -o $@
	@echo "${MGN}Object file ${GRA}$@${MGN} created from ${GRA}$<${MGN}${NC}"

$(OBJS_DIR):
	@mkdir $(OBJS_DIR)

clean:
	@make -C libs/ft_printf/ clean
	@make -C libs/libft/ clean
	@rm -rf ${OBJS}
	@echo "${GRA}${PROJECT}${RED}\tobject files have been deleted${NC}"
	@echo "\n"

exclean:
	@rm -f ${EXEC}
	@echo "${GRA}${EXEC}${RED}\texecutable file has been deleted\n${NC}"

fclean: clean exclean
	@make -C libs/ft_printf/ fclean
	@make -C libs/libft/ fclean
	@rm -rf ${NAME}
	@echo "${GRA}${PROJECT}${RED}\tarchive file ${GRA}${NAME}${RED}\t\thas been deleted${NC}"
	@echo "\n"

re: fclean all

compile: ${NAME} ${HEADER} ${MAIN}
	@${CC} ${CC_FLAGS} ${CC_OPTS} ${MAIN} -o ${EXEC}

recompile: fclean all

execute: ${EXEC}
	@./${EXEC} ${NB_LIST}
	@./${EXEC} ${NB_LIST} | ./checker_Mac ${NB_LIST}
	@./${EXEC} ${NB_LIST} | wc -l


intro:
	@echo "\n${YEL}Entering ${GRA}${PROJECT}${YEL}'s makefile"
	@echo "----------------------------${NC}"

title:
	@clear
	@echo "$$TITLE"

# ---------------------------------------------------------------------------- #
