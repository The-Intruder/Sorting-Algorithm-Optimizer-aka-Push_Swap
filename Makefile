# ---------------------------------------------------------------------------- #
# ---------------------------------------------------------------------------- #
# #                                                                          # #
# #       ███╗   ███╗ █████╗ ██╗  ██╗███████╗███████╗██╗██╗     ███████╗     # #
# #       ████╗ ████║██╔══██╗██║ ██╔╝██╔════╝██╔════╝██║██║     ██╔════╝     # #
# #       ██╔████╔██║███████║█████╔╝ █████╗  █████╗  ██║██║     █████╗       # #
# #       ██║╚██╔╝██║██╔══██║██╔═██╗ ██╔══╝  ██╔══╝  ██║██║     ██╔══╝       # #
# #       ██║ ╚═╝ ██║██║  ██║██║  ██╗███████╗██║     ██║███████╗███████╗     # #
# #       ╚═╝     ╚═╝╚═╝  ╚═╝╚═╝  ╚═╝╚══════╝╚═╝     ╚═╝╚══════╝╚══════╝     # #
# #                                                                          # #
# ---------------------------------------------------------------------------- #
# ---------------------------------------------------------------------------- #

# --------------------------- Terminal Color Codes --------------------------- #
NC  := \033[31;0m
RED := \033[0;31;1m
YEL := \033[0;33;1m
GRA := \033[0;37;1m
CYN := \033[0;36;1m
GRN := \033[0;32;1m
MGN := \033[0;35;1m
BLU := \033[0;34;1m

# ---------------------------------------------------------------------------- #

define TITLE
${RED}
=======================================================================================================
||                                  ,,                                                               ||
||                                `7MM                                                               ||
||                                  MM                                                               ||
|| `7MMpdMAo. `7MM  `7MM  ,pP"Ybd   MMpMMMb.          ,pP"Ybd `7M'    ,A    `MF' ,6"Yb.  `7MMpdMAo.  ||
||   MM   `Wb   MM    MM  8I   `"   MM    MM          8I   `"   VA   ,VAA   ,V  8}   MM    MM   `Wb  ||
||   MM    M8   MM    MM  `YMMMa.   MM    MM          `YMMMa.    VA ,V  VA ,V    ,pm9MM    MM    M8  ||
||   MM   ,AP   MM    MM  L.   I8   MM    MM          L.   I8     VVV    VVV    8M   MM    MM   ,AP  ||
||   MMbmmd'    `Mbod"YML.M9mmmP' .JMML  JMML.        M9mmmP'      W      W     `Moo9^Yo.  MMbmmd'   ||
||   MM                                                                                    MM        ||
|| .JMML.                                     mmmmmmm                                    .JMML.      ||
||                                                                                                   ||
=======================================================================================================
\n\t\t\t\t\t\t\t\t${GRA} - Created By ${BLU}The-Intruder${NC}
endef
export TITLE

# ---------------------------------------------------------------------------- #
CC := gcc
CC_FLAGS := -Wall -Wextra -Werror \
	-Ofast -march=native -fno-signed-zeros -fno-trapping-math
CC_OPTS := -Llibs/libft -lft \
	-Llibs/ft_printf -lftprintf \
	-Llibs/get_next_line -lgnl \
	-L. -lps

NB_LIST := \
2920 -1378 -2033 -2115 2052 -3341 -1532 -1941 -2908 -1065 4421 -85 4556 4922 -1498 -1311 -1624 1295 -3444 -1163 -222 4322 688 -206 -3972 3037 -1614 3596 -339 579 1970 2833 -3643 -3481 3608 132 -3245 -1419 8 -4201 3598 2914 2113 -181 4225 -3540 -1881 -271 4297 4876 3040 3114 2980 2502 -4511 4066 -4778 2484 -3068 4564 1167 4623 -4000 -2267 4201 820 632 1304 -2007 -4940 1641 -2368 -2994 157 1966 842 1317 -1847 4244 3927 -367 4395 3312 3635 -2147 -4900 1510 -762 -2023 421 4984 408 -2445 -170 4639 -1255 1434 1691 -3071 -2400 -1645 3937 2736 -2523 237 3551 510 -946 -1749 2733 2667 -4982 3499 -2558 1174 -1052 4500 238 -1774 823 3030 4957 1683 4731 2098 3945 3322 1922 -4145 -2111 -2818 -1601 -4556 1980 -3257 2349 -1124 -3649 -1547 -630 1498 4487 -4848 -2746 853 255 -2718 780 1395 1104 3806 1817 1290 -3260 -56 -3226 1956 -3825 -3918 -4399 -703 3737 -1823 2607 3129 -3602 1900 -4370 -688 3135 4221 -836 -3617 -4576 3249 672 3425 -2180 -693 -47 -1287 3932 -135 2596 -3654 4086 477 1177 4843 -2630 -2246 640 -4049 1019 3536 -4927 541 4253 1796 -3573 4479 4999 -3366 1035 -3966 -1102 -3153 -3112 -4406 3799 -4645 -1213 -2848 2751 3696 -3752 3431 279 1584 4800 2843 -3241 -1933 2681 -722 4459 1749 -4630 3147 2496 -3400 2139 2760 1603 -3674 915 -994 -2233 -2133 3745 601 -3222 -4538 -4447 1343 -689 -3749 -969 -1635 -1054 4465 2186 4251 -1387 -3236 2309 3349 3160 -324 1813 -3946 -4485 -3286 -4052 -2904 -48 -1576 -1455 -445 -1943 -4437 -3030 2085 1466 4165 3500 -1696 2739 4472 4891 -3809 -931 2842 -810 3846 -3556 862 3788 3481 1652 4441 3535 1021 3305 -4510 1066 -705 630 -1936 -513 -2272 -903 393 3064 -4866 -4061 -531 3247 -740 -4878 4700 -1049 -3722 -501 -732 4560 -3213 -2886 -699 4265 -4223 -3424 1549 -1155 -4547 2841 3893 -3561 352 1145 3410 4945 -2735 2816 1442 -2695 -413 -3109 424 2781 -2227 -609 2391 -257 3386 3443 514 3300 3321 4238 -2019 -3417 2346 -2444 2744 -1853 3432 1132 1400 -4312 1623 13 1154 -3308 3795 984 2387 -4183 -950 215 1348 -901 2707 -4770 -1994 -1210 1209 1687 3285 1557 -1699 -4325 779 2798 -263 -3820 2639 -745 3207 -3477 2704 -4910 1785 -2736 2114 -1977 3059 -359 -1909 -1864 -1843 1036 3375 -474 4324 -1066 -2888 1034 1111 2702 -4916 3012 4600 860 4740 3707 -3995 2064 -631 -2126 -30 -2503 -4165 -3993 -4515 -2333 1202 -1012 2361 -345 -1013 2376 923 2768 2330 -4734 4121 2237 3414 3881 -4946 2297 -1010 -4758 1146 -4082 -1315 4340 1046 -1575 -3466 -2728 707 -4106 274 3661 4881 1108 4025 -171 1804 4708 3714 -2721 2418 2163 -2434 4892 -4408 -1089 2666 4483 -2092 2935 -3559 1470 -2633 -2284 -3572 4549 -962 2294 -3173 -3127 4356 -2047 800 -1104 -2417 3792 -1902 -4418 4218 -4714 -622 -4156 -1975 4675 950 1376


PROJECT := push_swap
MAIN_PS := push_swap.c
MAIN_CK := checker.c
HEADER_PS := push_swap.h
HEADER_CK := checker.h
NAME := libps.a
EXEC_PS := push_swap
EXEC_CK := checker

# ---------------------------------------------------------------------------- #
SRCS_DIR := srcs/
SRCS_LST := init_stack.c error_handling.c stack_ops_utils.c stack_ops_main.c \
	misc_utils_i.c misc_utils_ii.c misc_utils_iii.c lis_algo.c lis_misc.c \
	lis_filtering.c testing_functions.c sorting_algo_i.c sorting_algo_ii.c \
	sorting_algo_iii.c 
SRCS := ${addprefix ${SRCS_DIR}, ${SRCS_LST}}

OBJS_DIR := objs/
OBJS_LST := ${patsubst %.c, %.o, ${SRCS_LST}}
OBJS := ${addprefix ${OBJS_DIR}, ${OBJS_LST}}

# ---------------------------------------------------------------------------- #
.PHONY: all clean fclean re title libs exclean intro

all: title ${NAME} ${EXEC_PS}

libs:
	@make -C libs/libft/
	@make -C libs/ft_printf/
	@make -C libs/get_next_line/

${NAME}: libs intro ${OBJS_DIR} ${OBJS} ${HEADER_PS}
	@ar -rcs ${NAME} ${OBJS}
	@echo "${BLU}Archive file ${GRA}${NAME}${BLU} created successfully${NC}\n"

${OBJS_DIR}%.o: ${SRCS_DIR}%.c ${HEADER_PS}
	@${CC} ${CC_FLAGS} -c $< -o $@
	@echo "${MGN}Object file ${GRA}$@${MGN} created from ${GRA}$<${MGN}${NC}"

${OBJS_DIR}:
	@mkdir ${OBJS_DIR}

${EXEC_PS}: ${HEADER_PS} ${MAIN_PS}
	@${CC} ${CC_FLAGS} ${CC_OPTS} ${MAIN_PS} -o ${EXEC_PS}

${EXEC_CK}: ${HEADER_CK} ${MAIN_CK}
	@${CC} ${CC_FLAGS} ${CC_OPTS} ${MAIN_CK} -o ${EXEC_CK}

clean:
	@make -C libs/ft_printf/ clean
	@make -C libs/libft/ clean
	@make -C libs/get_next_line/ clean
	@rm -rf ${OBJS_DIR}
	@echo "${GRA}${PROJECT}${RED}\tobject files have been deleted${NC}"
	@echo "\n"

fclean: clean
	@make -C libs/ft_printf/ fclean
	@make -C libs/libft/ fclean
	@make -C libs/get_next_line/ fclean
	@rm -f ${NAME}
	@echo "${GRA}${PROJECT}${RED}\tarchive file ${GRA}${NAME}${RED}\t\thas been deleted${NC}\n"
	@rm -f ${EXEC_PS}
	@echo "${GRA}${EXEC_PS}${RED}\texecutable file has been deleted${NC}"
	@rm -f ${EXEC_CK}
	@echo "${GRA}${EXEC_CK}${RED}\t\texecutable file has been deleted\n${NC}"

bonus: all ${EXEC_CK}

re: fclean all ${EXEC_CK}

execute: ${EXEC_PS}
	@./${EXEC_PS} ${NB_LIST}
	@./${EXEC_PS} ${NB_LIST} | ./${EXEC_CK} ${NB_LIST}
	@./${EXEC_PS} ${NB_LIST} | wc -l

intro:
	@echo "\n${YEL}Entering ${GRA}${PROJECT}${YEL}'s makefile"
	@echo "----------------------------${NC}"

title:
	@clear
	@echo "$$TITLE"

# ---------------------------------------------------------------------------- #
